# ๐๏ธ ุฏููู ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช Supabase

## โ ุงููุดููุฉ ุงูุญุงููุฉ

ุงูุฃุฒุฑุงุฑ ูุง ุชุนูู ูุฃู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุฑ ููุนุฏูุฉ. ูุฌุจ ุฅูุดุงุก ุงูุฌุฏุงูู ุฃููุงู.

---

## โ ุงูุญู ุงูุณุฑูุน

### ุงูุฎุทูุฉ 1: ุงูุชุญ Supabase Dashboard

1. ุงุฐูุจ ุฅูู: https://app.supabase.com
2. ุงูุชุญ ูุดุฑูุนู: `jjooxmznzjuduhbqlihi`
3. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุฎุชุฑ **SQL Editor**

### ุงูุฎุทูุฉ 2: ูููุฐ ุงูุณูุฑูุจุช

1. ุงูุณุฎ **ูู** ูุญุชูู ุงูููู: `database/schema.sql`
2. ุงูุตูู ูู SQL Editor
3. ุงุถุบุท **Run** (ุฃู Ctrl+Enter)

โฑ๏ธ **ุงูููุช ุงููุชููุน:** 10-15 ุซุงููุฉ

---

## ๐ ูุง ุงูุฐู ุณูุชู ุฅูุดุงุคูุ

### ุงูุฌุฏุงูู:
- โ `users` - ุงููุณุชุฎุฏููู
- โ `donors` - ุงููุชุจุฑุนูู
- โ `hospitals` - ุงููุณุชุดููุงุช
- โ `blood_requests` - ุทูุจุงุช ุงูุฏู
- โ `donations` - ุงูุชุจุฑุนุงุช
- โ `notifications` - ุงูุฅุดุนุงุฑุงุช
- โ `districts` - ุงููุฏูุฑูุงุช (ูุน ุจูุงูุงุช ุงูููุฑุฉ)

### ุงูุฏูุงู:
- โ `record_donation()` - ุชุณุฌูู ุชุจุฑุน ุฌุฏูุฏ
- โ `days_until_next_donation()` - ุญุณุงุจ ุงูุฃูุงู ุญุชู ุงูุชุจุฑุน ุงููุงุฏู

### ุงูุฃูุงู:
- โ Row Level Security (RLS)
- โ ุณูุงุณุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ

---

## ๐งช ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุชูููุฐ ุงูุณูุฑูุจุชุ ุชุญูู ูู:

### ูู Supabase Dashboard:

1. **Table Editor** โ ูุฌุจ ุฃู ุชุฑู 7 ุฌุฏุงูู
2. **SQL Editor** โ ูููุฐ:
   ```sql
   SELECT tablename FROM pg_tables 
   WHERE schemaname = 'public' 
   ORDER BY tablename;
   ```
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
   ```
   blood_requests
   districts
   donations
   donors
   hospitals
   notifications
   users
   ```

### ูู ุงูุชุทุจูู:

1. ุงูุชุญ ุงูุชุทุจูู
2. ุณุฌูู ููุชุจุฑุน ุฌุฏูุฏ
3. ุงููุฃ ุงูุจูุงูุงุช
4. ุงุถุบุท "ุชุณุฌูู"
5. **ูุฌุจ ุฃู ูุนูู ุงูุขู! โ**

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "relation already exists"
**ุงูุญู:** ุงูุฌุฏุงูู ููุฌูุฏุฉ ูุณุจูุงู. ุงุญุฐููุง ุฃููุงู:
```sql
DROP TABLE IF EXISTS notifications CASCADE;
DROP TABLE IF EXISTS donations CASCADE;
DROP TABLE IF EXISTS blood_requests CASCADE;
DROP TABLE IF EXISTS hospitals CASCADE;
DROP TABLE IF EXISTS donors CASCADE;
DROP TABLE IF EXISTS users CASCADE;
DROP TABLE IF EXISTS districts CASCADE;
```
ุซู ูููุฐ `schema.sql` ูุฑุฉ ุฃุฎุฑู.

### ุฎุทุฃ: "permission denied"
**ุงูุญู:** ุชุฃูุฏ ุฃูู ูุณุฌู ุฏุฎูู ูู Owner ูู Supabase.

### ุฎุทุฃ ูู ุงูุชุทุจูู: "Invalid API key"
**ุงูุญู:** ุชุญูู ูู `lib/config/supabase_config.dart`:
```dart
static const String supabaseUrl = 'https://jjooxmznzjuduhbqlihi.supabase.co';
static const String supabaseAnonKey = 'YOUR_ANON_KEY';
```

---

## ๐ ุจูุงูุงุช ุชุฌุฑูุจูุฉ (ุงุฎุชูุงุฑู)

ูุงุฎุชุจุงุฑ ุงูุชุทุจููุ ุฃุถู ูุชุจุฑุนูู ุชุฌุฑูุจููู:

```sql
-- ุฃููุงู: ุฃูุดุฆ ูุณุชุฎุฏู ุชุฌุฑูุจู
INSERT INTO users (id, phone, user_type) VALUES
('11111111-1111-1111-1111-111111111111', '+967777777777', 'donor');

-- ุซุงููุงู: ุฃูุดุฆ ูุชุจุฑุน
INSERT INTO donors (
    user_id, full_name, blood_type, district, 
    age, gender, is_available, has_whatsapp
) VALUES (
    '11111111-1111-1111-1111-111111111111',
    'ุฃุญูุฏ ูุญูุฏ',
    'O+',
    'ุงูุบูุถุฉ',
    28,
    'male',
    true,
    true
);

-- ูุฑุฑ ููุชุจุฑุนูู ุขุฎุฑูู ุจูุตุงุฆู ูุฎุชููุฉ
```

---

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

ุจุนุฏ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:

1. โ ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู
2. โ ุฌุฑูุจ ุงูุชุณุฌูู ููุชุจุฑุน
3. โ ุฌุฑูุจ ุงูุชุณุฌูู ููุณุชุดูู
4. โ ุฌุฑูุจ ุฅูุดุงุก ุทูุจ ุฏู
5. โ ุชุญูู ูู ุงูุจุญุซ ุนู ูุชุจุฑุนูู

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุญูู ูู logs ุงูุชุทุจูู: `flutter logs`
2. ุชุญูู ูู Supabase Logs ูู Dashboard
3. ุชุฃูุฏ ูู ุงุชุตุงู ุงูุฅูุชุฑูุช

---

**ุจุนุฏ ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ุงูุชุทุจูู ุณูุนูู ุจุดูู ูุงูู! ๐**
